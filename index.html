
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>智能学治指挥系统</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <button class="toggle-btn" onclick="toggleSidebar()">☰</button>
      <h2 class="logo">学治系统</h2>
    </div>
    <nav class="menu">
      <h3>主科</h3>
      <ul>
        <li><a href="#">📘 语文厅</a></li>
        <li><a href="#">📗 数学部</a></li>
        <li><a href="#">📙 英语部</a></li>
      </ul>
      <h3>综合科</h3>
      <ul>
        <li><a href="#">📕 历史部</a></li>
        <li><a href="#">🌍 地理部</a></li>
        <li><a href="#">🏛️ 政治部</a></li>
      </ul>
    </nav>
  </aside>

  <main class="main-content">
    <h1>📌 最新计划与报告</h1>
    <div id="latestContent" class="cards-container">
      <p class="empty">暂无任何计划或报告内容。</p>
    </div>
  </main>

  <script>
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("collapsed");
      document.body.classList.toggle("sidebar-collapsed");
    }

    const subjects = ["yuwen", "math", "english", "history", "geo", "politics"];
    let latest = [];

    for (let sub of subjects) {
      ["plan", "report"].forEach(type => {
        const title = localStorage.getItem(sub + "_title_" + type);
        const body = localStorage.getItem(sub + "_body_" + type);
        if (title && body) {
          latest.push({ subject: sub, type, title, body });
        }
      });
    }

    setTimeout(() => {
      const container = document.getElementById("latestContent");
      if (latest.length === 0) return;
      container.innerHTML = latest.map(item =>
        `<div class="card card-${item.subject}">
          <div class="card-header">
            <span class="subject-tag">${item.subject.toUpperCase()}</span>
            <span class="type">${item.type === "plan" ? "计划" : "报告"}</span>
          </div>
          <h3 class="title">${item.title}</h3>
          <p>${item.body.slice(0, 80)}...</p>
        </div>`
      ).join("");
    }, 200);
  </script>
</body>
</html>
